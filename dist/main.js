(()=>{"use strict";const e=[];function t(){localStorage.setItem("library",JSON.stringify(e))}const a=document.querySelector(".add-book"),i=document.querySelector(".library"),n=function(n,r,o,s){let c=document.createElement("div"),d=function(a,i,n,r){const o=function(e,t,a,i){return{title:e,author:t,pages:a,read:i}}(a,i,n,r);return e.push(o),t(),o}(n,r,o,s),l=!0===d.read?"Read":"Not read";c.innerHTML=`\n            <div class="title">${n}</div>\n            <div class="by">By</div>\n            <div class="author">${r}</div>\n            <div class="pages">${d.pages} pages</div>\n            <button type="button" class="read">${l}</button>\n            <button type="button" class="remove">Remove</button>`,c.classList.add("book"),i.insertBefore(c,a);let u=c.querySelector(".read"),v=c.querySelector(".remove");d.read&&u.classList.add("have-read"),u.addEventListener("click",(function(){this.classList.toggle("have-read"),d.read=!d.read,t(),this.textContent=!0===d.read?"Read":"Not read"})),v.addEventListener("click",(function(){c.remove(),function(a){let i=e.indexOf(a);1!==i&&(e.splice(i,1),t())}(d)}))},r=document.querySelector(".add-book"),o=document.querySelector(".add-book-cover"),s=document.querySelector(".cancel-add-book"),c=r.querySelector(".title-input"),d=r.querySelector(".author-input"),l=r.querySelector(".pages-input"),u=r.querySelector(".title-error"),v=r.querySelector(".author-error"),y=r.querySelector(".pages-error");function h(){c.checkValidity()?(u.classList.remove("active"),u.textContent=""):(u.classList.add("active"),c.validity.tooLong&&(u.textContent="max le nght is 20 characters"),c.validity.valueMissing&&(u.textContent="title is required"))}function m(){d.checkValidity()?(v.classList.remove("active"),v.textContent=""):(v.classList.add("active"),d.validity.tooLong&&(v.textContent="max lenght is 20 characters"),d.validity.tooShort&&(v.textContent="min lenght is 3 characters"),d.validity.patternMismatch&&(v.textContent="only alphabetic characters"),d.validity.valueMissing&&(v.textContent="author is required"))}function g(){l.checkValidity()?(y.classList.remove("active"),y.textContent=""):(y.classList.add("active"),l.validity.rangeUnderflow&&(y.textContent="must be more than 1"),l.validity.patternMismatch&&(y.textContent="only numbers"),l.validity.valueMissing&&(y.textContent="pages is required as a number"))}c.addEventListener("input",(()=>{h()})),d.addEventListener("input",(()=>{m()})),l.addEventListener("input",(()=>{g()}));(function(){let e=JSON.parse(localStorage.getItem("library"));null!==e&&e.forEach((e=>{n(e.title,e.author,e.pages,e.read)}))})(),o.addEventListener("click",(e=>{e.target.classList.add("hide")})),s.addEventListener("click",(e=>{o.classList.remove("hide")})),r.addEventListener("submit",(e=>{var t;h(),m(),g(),r.checkValidity()&&(n(c.value,d.value,l.value,!1),t=[u,v,y],[c,d,l].forEach((e=>{e.value=""})),t.forEach((e=>{e.textContent="",e.classList.remove("active")}))),e.preventDefault()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFFdkJVLEVBQVdNLFNBQVNFLGVBQ3RCTCxFQUFXYixZQUFjLGlDQU0vQixDQWhFQVEsRUFBV1gsaUJBQWlCLFNBQVMsS0FDbkNpQixHQUFpQixJQUduQkwsRUFBWVosaUJBQWlCLFNBQVMsS0FDcENzQixHQUFrQixJQUdwQlQsRUFBV2IsaUJBQWlCLFNBQVMsS0FDbkN5QixHQUFpQixLQ3RCbkIsV0FFRSxJQUFJRSxFQUFpQmpELEtBQUtrRCxNQUFNcEQsYUFBYXFELFFBQVEsWUFFOUIsT0FBbkJGLEdBQ0ZBLEVBQWVHLFNBQVMxQyxJQUN0QixFQUFXQSxFQUFLTixNQUFPTSxFQUFLTCxPQUFRSyxFQUFLSixNQUFPSSxFQUFLSCxLQUFLLEdBR2hFLEVDUkEsR0YrRUV3QixFQUFVVCxpQkFBaUIsU0FBVStCLElBQ25DQSxFQUFFQyxPQUFPckMsVUFBVUMsSUFBSSxPQUFPLElBRWhDYyxFQUFXVixpQkFBaUIsU0FBVStCLElBQ3BDdEIsRUFBVWQsVUFBVVMsT0FBTyxPQUFPLElBRXBDLEVBQUtKLGlCQUFpQixVQUFXK0IsSUFlbkMsSUFBNkJFLEVBZHpCaEIsSUFDQUssSUFDQUcsSUFDSSxFQUFLUCxrQkFDUCxFQUFXUCxFQUFXdUIsTUFBT3RCLEVBQVlzQixNQUFPckIsRUFBV3FCLE9BQU8sR0FVM0NELEVBUHJCLENBQUNuQixFQUFZQyxFQUFhQyxHQUQxQixDQUFDTCxFQUFZQyxFQUFhQyxHQVN6QmlCLFNBQVNLLElBQ2RBLEVBQU1ELE1BQVEsRUFBRSxJQUVsQkQsRUFBT0gsU0FBU00sSUFDZEEsRUFBTWpDLFlBQWMsR0FDcEJpQyxFQUFNekMsVUFBVVMsT0FBTyxTQUFTLEtBVmhDMkIsRUFBRU0sZ0JBQWdCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2Jvb2suanMiLCJ3ZWJwYWNrOi8vbGlicmFyeS8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vbGlicmFyeS8uL3NyYy9mb3JtLmpzIiwid2VicGFjazovL2xpYnJhcnkvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGxpYnJhcnkgPSBbXTtcblxuLy8gdXBkYXRlcyB0aGUgbG9jYWwgc3RvcmFnZVxuZnVuY3Rpb24gc2V0TG9jYWxTdG9yYWdlKCkge1xuICAvLyBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UubGlicmFyeSk7XG4gIC8vIGNvbnNvbGUubG9nKGxpYnJhcnkpO1xuICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShsaWJyYXJ5KSk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibGlicmFyeVwiLCBKU09OLnN0cmluZ2lmeShsaWJyYXJ5KSk7XG4gIC8vIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5saWJyYXJ5KTtcbn1cblxuLy8gYm9vayBmYWN0b3J5IGZ1bmN0aW9uXG5mdW5jdGlvbiBCb29rKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCByZWFkKSB7XG4gIHJldHVybiB7IHRpdGxlLCBhdXRob3IsIHBhZ2VzLCByZWFkIH07XG59XG5cbi8vIGFkZHMgYSBib29rIHRvIGxpYnJhcnkgdGhlbiByZXR1cm5zIGl0XG5mdW5jdGlvbiBhZGRCb29rKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCByZWFkKSB7XG4gIGNvbnN0IG5ld0Jvb2sgPSBCb29rKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCByZWFkKTtcbiAgLy8gY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmxpYnJhcnkpO1xuICBsaWJyYXJ5LnB1c2gobmV3Qm9vayk7XG4gIC8vIGNvbnNvbGUubG9nKGxpYnJhcnkpO1xuICBzZXRMb2NhbFN0b3JhZ2UoKTtcblxuICByZXR1cm4gbmV3Qm9vaztcbn1cblxuLy8gcmVtb3ZlcyBhIGJvb2sgZnJvbSBsaWJyYXJ5XG5mdW5jdGlvbiByZW1vdmVCb29rKGJvb2spIHtcbiAgbGV0IGJvb2tJbmRleCA9IGxpYnJhcnkuaW5kZXhPZihib29rKTtcbiAgaWYgKGJvb2tJbmRleCA9PT0gMSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsaWJyYXJ5LnNwbGljZShib29rSW5kZXgsIDEpO1xuICBzZXRMb2NhbFN0b3JhZ2UoKTtcbn1cblxuZnVuY3Rpb24gZ2V0TGlicmFyeSgpIHtcbiAgcmV0dXJuIGxpYnJhcnk7XG59XG5cbmV4cG9ydCB7IGFkZEJvb2ssIHJlbW92ZUJvb2ssIGdldExpYnJhcnksIHNldExvY2FsU3RvcmFnZSB9O1xuIiwiaW1wb3J0IHsgYWRkQm9vaywgcmVtb3ZlQm9vaywgc2V0TG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vYm9va1wiO1xuXG4vLyByZWZlcmVuY2UgdG8gbGlicmFyeSBhbmQgZm9ybSB0byBhZGQgYm9va3MgYmVmb3JlIGZvcm1cbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1ib29rXCIpO1xuY29uc3QgbGlicmFyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlicmFyeVwiKTtcblxuLy8gY3JhZXRlcyBhIGJvb2sgYm90aCBpbiBkb20gYW5kIGluIGxpYnJhcnkgYXJyYXlcbmZ1bmN0aW9uIGNyZWF0ZUJvb2sodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpIHtcbiAgbGV0IGJvb2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBsZXQgYm9vayA9IGFkZEJvb2sodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpO1xuICAvLyBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UubGlicmFyeSk7XG4gIGxldCByZWFkVGV4dCA9IGJvb2sucmVhZCA9PT0gdHJ1ZSA/IFwiUmVhZFwiIDogXCJOb3QgcmVhZFwiO1xuICBib29rRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPiR7dGl0bGV9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnlcIj5CeTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF1dGhvclwiPiR7YXV0aG9yfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2VzXCI+JHtib29rLnBhZ2VzfSBwYWdlczwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJyZWFkXCI+JHtyZWFkVGV4dH08L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwicmVtb3ZlXCI+UmVtb3ZlPC9idXR0b24+YDtcbiAgYm9va0Rpdi5jbGFzc0xpc3QuYWRkKFwiYm9va1wiKTtcbiAgLy8gY29uc29sZS5sb2coYm9vayk7XG4gIGxpYnJhcnkuaW5zZXJ0QmVmb3JlKGJvb2tEaXYsIGZvcm0pO1xuXG4gIC8vIGZ1bmN0aW9uYWxpdHkgZm9yIHJlYWQgYW5kIHJlbW92ZSBidXR0b25zXG5cbiAgbGV0IGNoYW5nZVJlYWRCdXR0b24gPSBib29rRGl2LnF1ZXJ5U2VsZWN0b3IoXCIucmVhZFwiKTtcbiAgbGV0IHJlbW92ZUJ1dHRvbiA9IGJvb2tEaXYucXVlcnlTZWxlY3RvcihcIi5yZW1vdmVcIik7XG5cbiAgLy8gY2hlY2sgZm9yIHdoZW4gbG9hZGluZyBmcm9tIHN0b3JhZ2VcbiAgaWYgKGJvb2sucmVhZCkge1xuICAgIGNoYW5nZVJlYWRCdXR0b24uY2xhc3NMaXN0LmFkZChcImhhdmUtcmVhZFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYW5nZVJlYWQoKSB7XG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaGF2ZS1yZWFkXCIpO1xuICAgIGJvb2sucmVhZCA9ICFib29rLnJlYWQ7XG4gICAgc2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IGJvb2sucmVhZCA9PT0gdHJ1ZSA/IFwiUmVhZFwiIDogXCJOb3QgcmVhZFwiO1xuICB9XG4gIGZ1bmN0aW9uIGRlbGV0ZUJvb2soKSB7XG4gICAgYm9va0Rpdi5yZW1vdmUoKTtcbiAgICByZW1vdmVCb29rKGJvb2spO1xuICB9XG5cbiAgY2hhbmdlUmVhZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hhbmdlUmVhZCk7XG4gIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlQm9vayk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUJvb2s7XG4iLCJpbXBvcnQgY3JlYXRlQm9vayBmcm9tIFwiLi9kb21cIjtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLWJvb2tcIik7XG5cbmNvbnN0IGZvcm1Db3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLWJvb2stY292ZXJcIik7XG5jb25zdCBmb3JtQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtYWRkLWJvb2tcIik7XG5cbmNvbnN0IHRpdGxlSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIudGl0bGUtaW5wdXRcIik7XG5jb25zdCBhdXRob3JJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5hdXRob3ItaW5wdXRcIik7XG5jb25zdCBwYWdlc0lucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBhZ2VzLWlucHV0XCIpO1xuXG5jb25zdCB0aXRsZUVycm9yID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlLWVycm9yXCIpO1xuY29uc3QgYXV0aG9yRXJyb3IgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuYXV0aG9yLWVycm9yXCIpO1xuY29uc3QgcGFnZXNFcnJvciA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5wYWdlcy1lcnJvclwiKTtcblxudGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICBjaGVja1RpdGxlSW5wdXQoKTtcbn0pO1xuXG5hdXRob3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICBjaGVja0F1dGhvcklucHV0KCk7XG59KTtcblxucGFnZXNJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICBjaGVja1BhZ2VzSW5wdXQoKTtcbn0pO1xuXG5mdW5jdGlvbiBjaGVja1RpdGxlSW5wdXQoKSB7XG4gIGlmICghdGl0bGVJbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICB0aXRsZUVycm9yLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgaWYgKHRpdGxlSW5wdXQudmFsaWRpdHkudG9vTG9uZykge1xuICAgICAgdGl0bGVFcnJvci50ZXh0Q29udGVudCA9IFwibWF4IGxlIG5naHQgaXMgMjAgY2hhcmFjdGVyc1wiO1xuICAgIH1cbiAgICBpZiAodGl0bGVJbnB1dC52YWxpZGl0eS52YWx1ZU1pc3NpbmcpIHtcbiAgICAgIHRpdGxlRXJyb3IudGV4dENvbnRlbnQgPSBcInRpdGxlIGlzIHJlcXVpcmVkXCI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRpdGxlRXJyb3IuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB0aXRsZUVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0F1dGhvcklucHV0KCkge1xuICBpZiAoIWF1dGhvcklucHV0LmNoZWNrVmFsaWRpdHkoKSkge1xuICAgIGF1dGhvckVycm9yLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgaWYgKGF1dGhvcklucHV0LnZhbGlkaXR5LnRvb0xvbmcpIHtcbiAgICAgIGF1dGhvckVycm9yLnRleHRDb250ZW50ID0gXCJtYXggbGVuZ2h0IGlzIDIwIGNoYXJhY3RlcnNcIjtcbiAgICB9XG4gICAgaWYgKGF1dGhvcklucHV0LnZhbGlkaXR5LnRvb1Nob3J0KSB7XG4gICAgICBhdXRob3JFcnJvci50ZXh0Q29udGVudCA9IFwibWluIGxlbmdodCBpcyAzIGNoYXJhY3RlcnNcIjtcbiAgICB9XG4gICAgaWYgKGF1dGhvcklucHV0LnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xuICAgICAgYXV0aG9yRXJyb3IudGV4dENvbnRlbnQgPSBcIm9ubHkgYWxwaGFiZXRpYyBjaGFyYWN0ZXJzXCI7XG4gICAgfVxuICAgIGlmIChhdXRob3JJbnB1dC52YWxpZGl0eS52YWx1ZU1pc3NpbmcpIHtcbiAgICAgIGF1dGhvckVycm9yLnRleHRDb250ZW50ID0gXCJhdXRob3IgaXMgcmVxdWlyZWRcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYXV0aG9yRXJyb3IuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICBhdXRob3JFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tQYWdlc0lucHV0KCkge1xuICBpZiAoIXBhZ2VzSW5wdXQuY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgcGFnZXNFcnJvci5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIGlmIChwYWdlc0lucHV0LnZhbGlkaXR5LnJhbmdlVW5kZXJmbG93KSB7XG4gICAgICBwYWdlc0Vycm9yLnRleHRDb250ZW50ID0gXCJtdXN0IGJlIG1vcmUgdGhhbiAxXCI7XG4gICAgfVxuICAgIGlmIChwYWdlc0lucHV0LnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xuICAgICAgcGFnZXNFcnJvci50ZXh0Q29udGVudCA9IFwib25seSBudW1iZXJzXCI7XG4gICAgfVxuICAgIGlmIChwYWdlc0lucHV0LnZhbGlkaXR5LnZhbHVlTWlzc2luZykge1xuICAgICAgcGFnZXNFcnJvci50ZXh0Q29udGVudCA9IFwicGFnZXMgaXMgcmVxdWlyZWQgYXMgYSBudW1iZXJcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcGFnZXNFcnJvci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIHBhZ2VzRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlRm9ybSgpIHtcbiAgZm9ybUNvdmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICB9KTtcbiAgZm9ybUNhbmNlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBmb3JtQ292ZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG4gIH0pO1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICBjaGVja1RpdGxlSW5wdXQoKTtcbiAgICBjaGVja0F1dGhvcklucHV0KCk7XG4gICAgY2hlY2tQYWdlc0lucHV0KCk7XG4gICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICBjcmVhdGVCb29rKHRpdGxlSW5wdXQudmFsdWUsIGF1dGhvcklucHV0LnZhbHVlLCBwYWdlc0lucHV0LnZhbHVlLCBmYWxzZSk7XG4gICAgICByZXNldElucHV0cyhcbiAgICAgICAgW3RpdGxlSW5wdXQsIGF1dGhvcklucHV0LCBwYWdlc0lucHV0XSxcbiAgICAgICAgW3RpdGxlRXJyb3IsIGF1dGhvckVycm9yLCBwYWdlc0Vycm9yXVxuICAgICAgKTtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVzZXRJbnB1dHMoaW5wdXRzLCBlcnJvcnMpIHtcbiAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaW5wdXQudmFsdWUgPSBcIlwiO1xuICB9KTtcbiAgZXJyb3JzLmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhY3RpdmF0ZUZvcm07XG4iLCJpbXBvcnQgY3JlYXRlQm9vayBmcm9tIFwiLi9kb21cIjtcblxuZnVuY3Rpb24gbG9hZExvY2FsU3RvcmFnZSgpIHtcbiAgLy8gY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsaWJyYXJ5XCIpKTtcbiAgbGV0IGxpYnJhcnlTdG9yYWdlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxpYnJhcnlcIikpO1xuICAvLyBjb25zb2xlLmxvZyhsaWJyYXJ5U3RvcmFnZSk7XG4gIGlmIChsaWJyYXJ5U3RvcmFnZSAhPT0gbnVsbCkge1xuICAgIGxpYnJhcnlTdG9yYWdlLmZvckVhY2goKGJvb2spID0+IHtcbiAgICAgIGNyZWF0ZUJvb2soYm9vay50aXRsZSwgYm9vay5hdXRob3IsIGJvb2sucGFnZXMsIGJvb2sucmVhZCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbG9hZExvY2FsU3RvcmFnZTtcbiIsImltcG9ydCBhY3RpdmF0ZUZvcm0gZnJvbSBcIi4vZm9ybVwiO1xuaW1wb3J0IGxvYWRTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcblxubG9hZFN0b3JhZ2UoKTtcbmFjdGl2YXRlRm9ybSgpO1xuIl0sIm5hbWVzIjpbImxpYnJhcnkiLCJzZXRMb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRpdGxlIiwiYXV0aG9yIiwicGFnZXMiLCJyZWFkIiwiYm9va0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJib29rIiwibmV3Qm9vayIsIkJvb2siLCJwdXNoIiwiYWRkQm9vayIsInJlYWRUZXh0IiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5zZXJ0QmVmb3JlIiwiY2hhbmdlUmVhZEJ1dHRvbiIsInJlbW92ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGlzIiwidG9nZ2xlIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJib29rSW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicmVtb3ZlQm9vayIsImZvcm1Db3ZlciIsImZvcm1DYW5jZWwiLCJ0aXRsZUlucHV0IiwiYXV0aG9ySW5wdXQiLCJwYWdlc0lucHV0IiwidGl0bGVFcnJvciIsImF1dGhvckVycm9yIiwicGFnZXNFcnJvciIsImNoZWNrVGl0bGVJbnB1dCIsImNoZWNrVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInRvb0xvbmciLCJ2YWx1ZU1pc3NpbmciLCJjaGVja0F1dGhvcklucHV0IiwidG9vU2hvcnQiLCJwYXR0ZXJuTWlzbWF0Y2giLCJjaGVja1BhZ2VzSW5wdXQiLCJyYW5nZVVuZGVyZmxvdyIsImxpYnJhcnlTdG9yYWdlIiwicGFyc2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImUiLCJ0YXJnZXQiLCJlcnJvcnMiLCJ2YWx1ZSIsImlucHV0IiwiZXJyb3IiLCJwcmV2ZW50RGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=