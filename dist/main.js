(()=>{"use strict";let e=[];function t(){localStorage.setItem("library",JSON.stringify(e)),console.log(localStorage.library)}const a=document.querySelector(".add-book"),i=document.querySelector(".library"),n=function(n,r,o,c){let s=document.createElement("div"),l=function(a,i,n,r){const o=function(e,t,a,i){return{title:e,author:t,pages:a,read:i}}(a,i,n,r);return e.push(o),t(),o}(n,r,o,c),d=!0===l.read?"Read":"Not read";s.innerHTML=`\n            <div class="title">${n}</div>\n            <div class="by">By</div>\n            <div class="author">${r}</div>\n            <div class="pages">${l.pages} pages</div>\n            <button type="button" class="read">${d}</button>\n            <button type="button" class="remove">Remove</button>`,s.classList.add("book"),i.insertBefore(s,a);let u=s.querySelector(".read"),v=s.querySelector(".remove");u.addEventListener("click",(function(){this.classList.toggle("have-read"),l.read=!l.read,t(),this.textContent=!0===l.read?"Read":"Not read"})),v.addEventListener("click",(function(){s.remove(),function(a){let i=e.indexOf(a);1!==i&&(e.splice(i,1),t())}(l)}))},r=document.querySelector(".add-book"),o=document.querySelector(".add-book-cover"),c=document.querySelector(".cancel-add-book"),s=r.querySelector(".title-input"),l=r.querySelector(".author-input"),d=r.querySelector(".pages-input"),u=r.querySelector(".title-error"),v=r.querySelector(".author-error"),y=r.querySelector(".pages-error");function h(){s.checkValidity()?(u.classList.remove("active"),u.textContent=""):(u.classList.add("active"),s.validity.tooLong&&(u.textContent="max le nght is 20 characters"),s.validity.valueMissing&&(u.textContent="title is required"))}function m(){l.checkValidity()?(v.classList.remove("active"),v.textContent=""):(v.classList.add("active"),l.validity.tooLong&&(v.textContent="max lenght is 20 characters"),l.validity.tooShort&&(v.textContent="min lenght is 3 characters"),l.validity.patternMismatch&&(v.textContent="only alphabetic characters"),l.validity.valueMissing&&(v.textContent="author is required"))}function g(){d.checkValidity()?(y.classList.remove("active"),y.textContent=""):(y.classList.add("active"),d.validity.rangeUnderflow&&(y.textContent="must be more than 1"),d.validity.patternMismatch&&(y.textContent="only numbers"),d.validity.valueMissing&&(y.textContent="pages is required as a number"))}s.addEventListener("input",(()=>{h()})),l.addEventListener("input",(()=>{m()})),d.addEventListener("input",(()=>{g()}));(function(){console.log(localStorage.getItem("library"));let e=JSON.parse(localStorage.getItem("library"));null!==e&&e.forEach((e=>{n(e)}))})(),o.addEventListener("click",(e=>{e.target.classList.add("hide")})),c.addEventListener("click",(e=>{o.classList.remove("hide")})),r.addEventListener("submit",(e=>{var t;h(),m(),g(),r.checkValidity()&&(n(s.value,l.value,d.value,!1),t=[u,v,y],[s,l,d].forEach((e=>{e.value=""})),t.forEach((e=>{e.textContent="",e.classList.remove("active")}))),e.preventDefault()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxTQUFTRSxlQUN0QkwsRUFBV2IsWUFBYyxpQ0FNL0IsQ0FoRUFRLEVBQVdYLGlCQUFpQixTQUFTLEtBQ25DaUIsR0FBaUIsSUFHbkJMLEVBQVlaLGlCQUFpQixTQUFTLEtBQ3BDc0IsR0FBa0IsSUFHcEJULEVBQVdiLGlCQUFpQixTQUFTLEtBQ25DeUIsR0FBaUIsS0N0Qm5CLFdBQ0UvQyxRQUFRQyxJQUFJTCxhQUFhcUQsUUFBUSxZQUNqQyxJQUFJQyxFQUFpQnBELEtBQUtxRCxNQUFNdkQsYUFBYXFELFFBQVEsWUFFOUIsT0FBbkJDLEdBQ0ZBLEVBQWVFLFNBQVMxQyxJQUN0QixFQUFXQSxFQUFLLEdBR3RCLEVDUkEsR0YrRUVxQixFQUFVVCxpQkFBaUIsU0FBVStCLElBQ25DQSxFQUFFQyxPQUFPckMsVUFBVUMsSUFBSSxPQUFPLElBRWhDYyxFQUFXVixpQkFBaUIsU0FBVStCLElBQ3BDdEIsRUFBVWQsVUFBVVMsT0FBTyxPQUFPLElBRXBDLEVBQUtKLGlCQUFpQixVQUFXK0IsSUFlbkMsSUFBNkJFLEVBZHpCaEIsSUFDQUssSUFDQUcsSUFDSSxFQUFLUCxrQkFDUCxFQUFXUCxFQUFXdUIsTUFBT3RCLEVBQVlzQixNQUFPckIsRUFBV3FCLE9BQU8sR0FVM0NELEVBUHJCLENBQUNuQixFQUFZQyxFQUFhQyxHQUQxQixDQUFDTCxFQUFZQyxFQUFhQyxHQVN6QmlCLFNBQVNLLElBQ2RBLEVBQU1ELE1BQVEsRUFBRSxJQUVsQkQsRUFBT0gsU0FBU00sSUFDZEEsRUFBTWpDLFlBQWMsR0FDcEJpQyxFQUFNekMsVUFBVVMsT0FBTyxTQUFTLEtBVmhDMkIsRUFBRU0sZ0JBQWdCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2Jvb2suanMiLCJ3ZWJwYWNrOi8vbGlicmFyeS8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vbGlicmFyeS8uL3NyYy9mb3JtLmpzIiwid2VicGFjazovL2xpYnJhcnkvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBsaWJyYXJ5ID0gW107XHJcblxyXG4vLyB1cGRhdGVzIHRoZSBsb2NhbCBzdG9yYWdlXHJcbmZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZSgpIHtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxpYnJhcnlcIiwgSlNPTi5zdHJpbmdpZnkobGlicmFyeSkpO1xyXG4gIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5saWJyYXJ5KTtcclxufVxyXG5cclxuLy8gYm9vayBmYWN0b3J5IGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIEJvb2sodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpIHtcclxuICByZXR1cm4geyB0aXRsZSwgYXV0aG9yLCBwYWdlcywgcmVhZCB9O1xyXG59XHJcblxyXG4vLyBhZGRzIGEgYm9vayB0byBsaWJyYXJ5IHRoZW4gcmV0dXJucyBpdFxyXG5mdW5jdGlvbiBhZGRCb29rKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCByZWFkKSB7XHJcbiAgY29uc3QgbmV3Qm9vayA9IEJvb2sodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpO1xyXG5cclxuICBsaWJyYXJ5LnB1c2gobmV3Qm9vayk7XHJcbiAgLy8gY29uc29sZS5sb2cobGlicmFyeSk7XHJcbiAgc2V0TG9jYWxTdG9yYWdlKCk7XHJcblxyXG4gIHJldHVybiBuZXdCb29rO1xyXG59XHJcblxyXG4vLyByZW1vdmVzIGEgYm9vayBmcm9tIGxpYnJhcnlcclxuZnVuY3Rpb24gcmVtb3ZlQm9vayhib29rKSB7XHJcbiAgbGV0IGJvb2tJbmRleCA9IGxpYnJhcnkuaW5kZXhPZihib29rKTtcclxuICBpZiAoYm9va0luZGV4ID09PSAxKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGxpYnJhcnkuc3BsaWNlKGJvb2tJbmRleCwgMSk7XHJcbiAgc2V0TG9jYWxTdG9yYWdlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExpYnJhcnkoKSB7XHJcbiAgcmV0dXJuIGxpYnJhcnk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldExpYnJhcnkobmV3TGlicmFyeSkge1xyXG4gIGxpYnJhcnkgPSBuZXdMaWJyYXJ5O1xyXG59XHJcblxyXG5leHBvcnQgeyBhZGRCb29rLCByZW1vdmVCb29rLCBnZXRMaWJyYXJ5LCBzZXRMaWJyYXJ5LCBzZXRMb2NhbFN0b3JhZ2UgfTtcclxuIiwiaW1wb3J0IHsgYWRkQm9vaywgcmVtb3ZlQm9vaywgc2V0TG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vYm9va1wiO1xyXG5cclxuLy8gcmVmZXJlbmNlIHRvIGxpYnJhcnkgYW5kIGZvcm0gdG8gYWRkIGJvb2tzIGJlZm9yZSBmb3JtXHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1ib29rXCIpO1xyXG5jb25zdCBsaWJyYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5saWJyYXJ5XCIpO1xyXG5cclxuLy8gY3JhZXRlcyBhIGJvb2sgYm90aCBpbiBkb20gYW5kIGluIGxpYnJhcnkgYXJyYXlcclxuZnVuY3Rpb24gY3JlYXRlQm9vayh0aXRsZSwgYXV0aG9yLCBwYWdlcywgcmVhZCkge1xyXG4gIGxldCBib29rRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBsZXQgYm9vayA9IGFkZEJvb2sodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpO1xyXG4gIGxldCByZWFkVGV4dCA9IGJvb2sucmVhZCA9PT0gdHJ1ZSA/IFwiUmVhZFwiIDogXCJOb3QgcmVhZFwiO1xyXG4gIGJvb2tEaXYuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke3RpdGxlfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnlcIj5CeTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXV0aG9yXCI+JHthdXRob3J9PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYWdlc1wiPiR7Ym9vay5wYWdlc30gcGFnZXM8L2Rpdj5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJyZWFkXCI+JHtyZWFkVGV4dH08L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJyZW1vdmVcIj5SZW1vdmU8L2J1dHRvbj5gO1xyXG4gIGJvb2tEaXYuY2xhc3NMaXN0LmFkZChcImJvb2tcIik7XHJcbiAgLy8gY29uc29sZS5sb2coYm9vayk7XHJcbiAgbGlicmFyeS5pbnNlcnRCZWZvcmUoYm9va0RpdiwgZm9ybSk7XHJcblxyXG4gIC8vIGZ1bmN0aW9uYWxpdHkgZm9yIHJlYWQgYW5kIHJlbW92ZSBidXR0b25zXHJcblxyXG4gIGxldCBjaGFuZ2VSZWFkQnV0dG9uID0gYm9va0Rpdi5xdWVyeVNlbGVjdG9yKFwiLnJlYWRcIik7XHJcbiAgbGV0IHJlbW92ZUJ1dHRvbiA9IGJvb2tEaXYucXVlcnlTZWxlY3RvcihcIi5yZW1vdmVcIik7XHJcblxyXG4gIGZ1bmN0aW9uIGNoYW5nZVJlYWQoKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJoYXZlLXJlYWRcIik7XHJcbiAgICBib29rLnJlYWQgPSAhYm9vay5yZWFkO1xyXG4gICAgc2V0TG9jYWxTdG9yYWdlKCk7XHJcbiAgICB0aGlzLnRleHRDb250ZW50ID0gYm9vay5yZWFkID09PSB0cnVlID8gXCJSZWFkXCIgOiBcIk5vdCByZWFkXCI7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGRlbGV0ZUJvb2soKSB7XHJcbiAgICBib29rRGl2LnJlbW92ZSgpO1xyXG4gICAgcmVtb3ZlQm9vayhib29rKTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVJlYWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoYW5nZVJlYWQpO1xyXG4gIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlQm9vayk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUJvb2s7XHJcbiIsImltcG9ydCBjcmVhdGVCb29rIGZyb20gXCIuL2RvbVwiO1xyXG5cclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLWJvb2tcIik7XHJcblxyXG5jb25zdCBmb3JtQ292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1ib29rLWNvdmVyXCIpO1xyXG5jb25zdCBmb3JtQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtYWRkLWJvb2tcIik7XHJcblxyXG5jb25zdCB0aXRsZUlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBhdXRob3JJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5hdXRob3ItaW5wdXRcIik7XHJcbmNvbnN0IHBhZ2VzSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucGFnZXMtaW5wdXRcIik7XHJcblxyXG5jb25zdCB0aXRsZUVycm9yID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlLWVycm9yXCIpO1xyXG5jb25zdCBhdXRob3JFcnJvciA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5hdXRob3ItZXJyb3JcIik7XHJcbmNvbnN0IHBhZ2VzRXJyb3IgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucGFnZXMtZXJyb3JcIik7XHJcblxyXG50aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgY2hlY2tUaXRsZUlucHV0KCk7XHJcbn0pO1xyXG5cclxuYXV0aG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICBjaGVja0F1dGhvcklucHV0KCk7XHJcbn0pO1xyXG5cclxucGFnZXNJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gIGNoZWNrUGFnZXNJbnB1dCgpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGNoZWNrVGl0bGVJbnB1dCgpIHtcclxuICBpZiAoIXRpdGxlSW5wdXQuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICB0aXRsZUVycm9yLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICBpZiAodGl0bGVJbnB1dC52YWxpZGl0eS50b29Mb25nKSB7XHJcbiAgICAgIHRpdGxlRXJyb3IudGV4dENvbnRlbnQgPSBcIm1heCBsZSBuZ2h0IGlzIDIwIGNoYXJhY3RlcnNcIjtcclxuICAgIH1cclxuICAgIGlmICh0aXRsZUlucHV0LnZhbGlkaXR5LnZhbHVlTWlzc2luZykge1xyXG4gICAgICB0aXRsZUVycm9yLnRleHRDb250ZW50ID0gXCJ0aXRsZSBpcyByZXF1aXJlZFwiO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICB0aXRsZUVycm9yLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB0aXRsZUVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrQXV0aG9ySW5wdXQoKSB7XHJcbiAgaWYgKCFhdXRob3JJbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgIGF1dGhvckVycm9yLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICBpZiAoYXV0aG9ySW5wdXQudmFsaWRpdHkudG9vTG9uZykge1xyXG4gICAgICBhdXRob3JFcnJvci50ZXh0Q29udGVudCA9IFwibWF4IGxlbmdodCBpcyAyMCBjaGFyYWN0ZXJzXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aG9ySW5wdXQudmFsaWRpdHkudG9vU2hvcnQpIHtcclxuICAgICAgYXV0aG9yRXJyb3IudGV4dENvbnRlbnQgPSBcIm1pbiBsZW5naHQgaXMgMyBjaGFyYWN0ZXJzXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aG9ySW5wdXQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoKSB7XHJcbiAgICAgIGF1dGhvckVycm9yLnRleHRDb250ZW50ID0gXCJvbmx5IGFscGhhYmV0aWMgY2hhcmFjdGVyc1wiO1xyXG4gICAgfVxyXG4gICAgaWYgKGF1dGhvcklucHV0LnZhbGlkaXR5LnZhbHVlTWlzc2luZykge1xyXG4gICAgICBhdXRob3JFcnJvci50ZXh0Q29udGVudCA9IFwiYXV0aG9yIGlzIHJlcXVpcmVkXCI7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGF1dGhvckVycm9yLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICBhdXRob3JFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1BhZ2VzSW5wdXQoKSB7XHJcbiAgaWYgKCFwYWdlc0lucHV0LmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgcGFnZXNFcnJvci5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgaWYgKHBhZ2VzSW5wdXQudmFsaWRpdHkucmFuZ2VVbmRlcmZsb3cpIHtcclxuICAgICAgcGFnZXNFcnJvci50ZXh0Q29udGVudCA9IFwibXVzdCBiZSBtb3JlIHRoYW4gMVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhZ2VzSW5wdXQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoKSB7XHJcbiAgICAgIHBhZ2VzRXJyb3IudGV4dENvbnRlbnQgPSBcIm9ubHkgbnVtYmVyc1wiO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhZ2VzSW5wdXQudmFsaWRpdHkudmFsdWVNaXNzaW5nKSB7XHJcbiAgICAgIHBhZ2VzRXJyb3IudGV4dENvbnRlbnQgPSBcInBhZ2VzIGlzIHJlcXVpcmVkIGFzIGEgbnVtYmVyXCI7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHBhZ2VzRXJyb3IuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIHBhZ2VzRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGVGb3JtKCkge1xyXG4gIGZvcm1Db3Zlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIH0pO1xyXG4gIGZvcm1DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBmb3JtQ292ZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgfSk7XHJcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICBjaGVja1RpdGxlSW5wdXQoKTtcclxuICAgIGNoZWNrQXV0aG9ySW5wdXQoKTtcclxuICAgIGNoZWNrUGFnZXNJbnB1dCgpO1xyXG4gICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgIGNyZWF0ZUJvb2sodGl0bGVJbnB1dC52YWx1ZSwgYXV0aG9ySW5wdXQudmFsdWUsIHBhZ2VzSW5wdXQudmFsdWUsIGZhbHNlKTtcclxuICAgICAgcmVzZXRJbnB1dHMoXHJcbiAgICAgICAgW3RpdGxlSW5wdXQsIGF1dGhvcklucHV0LCBwYWdlc0lucHV0XSxcclxuICAgICAgICBbdGl0bGVFcnJvciwgYXV0aG9yRXJyb3IsIHBhZ2VzRXJyb3JdXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0SW5wdXRzKGlucHV0cywgZXJyb3JzKSB7XHJcbiAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgfSk7XHJcbiAgZXJyb3JzLmZvckVhY2goKGVycm9yKSA9PiB7XHJcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhY3RpdmF0ZUZvcm07XHJcbiIsImltcG9ydCBjcmVhdGVCb29rIGZyb20gXCIuL2RvbVwiO1xyXG5cclxuZnVuY3Rpb24gbG9hZExvY2FsU3RvcmFnZSgpIHtcclxuICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxpYnJhcnlcIikpO1xyXG4gIGxldCBsaWJyYXJ5U3RvcmFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsaWJyYXJ5XCIpKTtcclxuICAvLyBjb25zb2xlLmxvZyhsaWJyYXJ5U3RvcmFnZSk7XHJcbiAgaWYgKGxpYnJhcnlTdG9yYWdlICE9PSBudWxsKSB7XHJcbiAgICBsaWJyYXJ5U3RvcmFnZS5mb3JFYWNoKChib29rKSA9PiB7XHJcbiAgICAgIGNyZWF0ZUJvb2soYm9vayk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGxvYWRMb2NhbFN0b3JhZ2U7XHJcbiIsImltcG9ydCBhY3RpdmF0ZUZvcm0gZnJvbSBcIi4vZm9ybVwiO1xyXG5pbXBvcnQgbG9hZFN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xyXG5cclxubG9hZFN0b3JhZ2UoKTtcclxuYWN0aXZhdGVGb3JtKCk7XHJcbiJdLCJuYW1lcyI6WyJsaWJyYXJ5Iiwic2V0TG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGl0bGUiLCJhdXRob3IiLCJwYWdlcyIsInJlYWQiLCJib29rRGl2IiwiY3JlYXRlRWxlbWVudCIsImJvb2siLCJuZXdCb29rIiwiQm9vayIsInB1c2giLCJhZGRCb29rIiwicmVhZFRleHQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnNlcnRCZWZvcmUiLCJjaGFuZ2VSZWFkQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJ0b2dnbGUiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImJvb2tJbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJyZW1vdmVCb29rIiwiZm9ybUNvdmVyIiwiZm9ybUNhbmNlbCIsInRpdGxlSW5wdXQiLCJhdXRob3JJbnB1dCIsInBhZ2VzSW5wdXQiLCJ0aXRsZUVycm9yIiwiYXV0aG9yRXJyb3IiLCJwYWdlc0Vycm9yIiwiY2hlY2tUaXRsZUlucHV0IiwiY2hlY2tWYWxpZGl0eSIsInZhbGlkaXR5IiwidG9vTG9uZyIsInZhbHVlTWlzc2luZyIsImNoZWNrQXV0aG9ySW5wdXQiLCJ0b29TaG9ydCIsInBhdHRlcm5NaXNtYXRjaCIsImNoZWNrUGFnZXNJbnB1dCIsInJhbmdlVW5kZXJmbG93IiwiZ2V0SXRlbSIsImxpYnJhcnlTdG9yYWdlIiwicGFyc2UiLCJmb3JFYWNoIiwiZSIsInRhcmdldCIsImVycm9ycyIsInZhbHVlIiwiaW5wdXQiLCJlcnJvciIsInByZXZlbnREZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==