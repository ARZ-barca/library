(()=>{"use strict";const e=[];function t(){localStorage.setItem("library",JSON.stringify(e))}const a=document.querySelector(".add-book"),i=document.querySelector(".library"),n=function(n,r,o,s){let c=document.createElement("div"),d=function(a,i,n,r){const o=function(e,t,a,i){return{title:e,author:t,pages:a,read:i}}(a,i,n,r);return e.push(o),t(),o}(n,r,o,s),l=!0===d.read?"Read":"Not read";c.innerHTML=`\n            <div class="title">${n}</div>\n            <div class="by">By</div>\n            <div class="author">${r}</div>\n            <div class="pages">${d.pages} pages</div>\n            <button type="button" class="read">${l}</button>\n            <button type="button" class="remove">Remove</button>`,c.classList.add("book"),i.insertBefore(c,a);let u=c.querySelector(".read"),v=c.querySelector(".remove");d.read&&u.classList.add("have-read"),u.addEventListener("click",(function(){this.classList.toggle("have-read"),d.read=!d.read,t(),this.textContent=!0===d.read?"Read":"Not read"})),v.addEventListener("click",(function(){c.remove(),function(a){let i=e.indexOf(a);1!==i&&(e.splice(i,1),t())}(d)}))},r=document.querySelector(".add-book"),o=document.querySelector(".add-book-cover"),s=document.querySelector(".cancel-add-book"),c=r.querySelector(".title-input"),d=r.querySelector(".author-input"),l=r.querySelector(".pages-input"),u=r.querySelector(".title-error"),v=r.querySelector(".author-error"),y=r.querySelector(".pages-error");function h(){c.checkValidity()?(u.classList.remove("active"),u.textContent=""):(u.classList.add("active"),c.validity.tooLong&&(u.textContent="max le nght is 20 characters"),c.validity.valueMissing&&(u.textContent="title is required"))}function m(){d.checkValidity()?(v.classList.remove("active"),v.textContent=""):(v.classList.add("active"),d.validity.tooLong&&(v.textContent="max lenght is 20 characters"),d.validity.tooShort&&(v.textContent="min lenght is 3 characters"),d.validity.patternMismatch&&(v.textContent="only alphabetic characters"),d.validity.valueMissing&&(v.textContent="author is required"))}function g(){l.checkValidity()?(y.classList.remove("active"),y.textContent=""):(y.classList.add("active"),l.validity.rangeUnderflow&&(y.textContent="must be more than 1"),l.validity.patternMismatch&&(y.textContent="only numbers"),l.validity.valueMissing&&(y.textContent="pages is required as a number"))}c.addEventListener("input",(()=>{h()})),d.addEventListener("input",(()=>{m()})),l.addEventListener("input",(()=>{g()}));(function(){let e=JSON.parse(localStorage.getItem("library"));null!==e&&e.forEach((e=>{n(e.title,e.author,e.pages,e.read)}))})(),o.addEventListener("click",(e=>{e.target.classList.add("hide")})),s.addEventListener("click",(e=>{o.classList.remove("hide")})),r.addEventListener("submit",(e=>{var t;h(),m(),g(),r.checkValidity()&&(n(c.value,d.value,l.value,!1),t=[u,v,y],[c,d,l].forEach((e=>{e.value=""})),t.forEach((e=>{e.textContent="",e.classList.remove("active")}))),e.preventDefault()}))})();